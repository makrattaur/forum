@model Forum.ViewModels.ThreadViewModel
@{
    ViewBag.Title = "Threads";
}

<h2>@Model.Forum.Name</h2>

<div class="panel panel-default thread-list">
    <table class="table table-bordered">
        <tr>
            <th>Threads</th>
            <th>Posts</th>
            <th>Views</th>
            <th>Last Post</th>
        </tr>
        @foreach (var thread in Model.Threads)
        {
            <tr>
                <td>@Html.ActionLink(thread.Title, "Show", new { id = thread.Id }) <br />
                    by @thread.User.Name on @thread.CreationTime
                </td>
                <td>@thread.Post.Count</td>
                <td>@thread.TimesViewed</td>
                <td> </td>
            </tr>
        }
        @if (Model.Threads.Count() < 1)
        {
            <tr>
                <td colspan="4">
                    <em>(no posts in forum)</em>
                </td>
            </tr> 
        }
    </table>
</div>

@if(Request.IsAuthenticated)
{
    @Html.ActionLink("Create new thread", "Create", "Thread", new { id = Model.Forum.Id }, new { @class = "btn btn-primary" }) <br />
}
@Html.ActionLink("Back to forums", "Index", "Forum")
